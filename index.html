<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>包装需求及成本估算表</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f9fc;
            color: #333;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 3px solid #3498db;
            padding-bottom: 15px;
            margin-bottom: 25px;
        }
        .form-section {
            background: white;
            padding: 25px;
            margin-bottom: 25px;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
        }
        h2 {
            color: #3498db;
            margin-top: 0;
            font-size: 20px;
            border-left: 5px solid #3498db;
            padding-left: 15px;
        }
        label {
            display: block;
            margin: 18px 0 8px;
            font-weight: bold;
            color: #2c3e50;
        }
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            box-sizing: border-box;
            font-family: inherit;
            transition: border 0.3s;
        }
        input:focus, select:focus, textarea:focus {
            border-color: #3498db;
            outline: none;
        }
        .checkbox-group {
            margin: 12px 0;
        }
        .checkbox-item {
            display: inline-block;
            margin-right: 18px;
            margin-bottom: 10px;
        }
        .submit-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 14px 30px;
            font-size: 17px;
            border-radius: 6px;
            cursor: pointer;
            display: block;
            margin: 35px auto 0;
            transition: all 0.3s;
        }
        .submit-btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }
        .flex-row {
            display: flex;
            gap: 15px;
        }
        .flex-row > div {
            flex: 1;
        }
        .cost-estimate {
            background: #f8fafc;
            border-left: 4px solid #3498db;
            padding: 15px;
            margin-top: 20px;
            border-radius: 0 5px 5px 0;
        }
        .cost-value {
            font-size: 24px;
            color: #e74c3c;
            font-weight: bold;
            margin: 10px 0;
        }
        .hidden {
            display: none;
        }
        #success-message {
            display: none;
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>产品包装需求及成本估算表</h1>
    <div id="success-message">提交成功！我们会尽快与您联系。</div>

    <form id="packagingForm" action="https://formspree.io/f/meokpalq" method="POST">
        <!-- 基础信息 -->
        <div class="form-section">
            <h2>1. 基础信息</h2>
            
            <input type="hidden" name="_replyto" value="yuanqq2@gmail.com">
            <input type="hidden" name="_subject" value="新包装需求提交">
            
            <div class="flex-row">
                <div>
                    <label for="brand_name">品牌名称</label>
                    <input type="text" id="brand_name" name="brand_name" placeholder="例：XX品牌">
                </div>
                <div>
                    <label for="product_name">产品名称</label>
                    <input type="text" id="product_name" name="product_name" placeholder="例：智能手表">
                </div>
            </div>

            <div class="flex-row">
                <div>
                    <label for="product_model">产品型号</label>
                    <input type="text" id="product_model" name="product_model" placeholder="例：Pro Max 2024">
                </div>
                <div>
                    <label for="quantity">预计生产数量</label>
                    <input type="number" id="quantity" name="quantity" placeholder="例：5000" min="0">
                </div>
            </div>
            
            <label for="product_size">产品尺寸 (长×宽×高 mm)</label>
            <div class="flex-row">
                <input type="number" id="length" name="length" placeholder="长" min="0">
                <input type="number" id="width" name="width" placeholder="宽" min="0">
                <input type="number" id="height" name="height" placeholder="高" min="0">
            </div>
        </div>

        <!-- 外包装配置 -->
        <div class="form-section">
            <h2>2. 外包装配置</h2>
            
            <label>包装盒类型</label>
            <div class="checkbox-group">
                <label class="checkbox-item">
                    <input type="radio" name="包装盒类型" value="天地盒" checked> 天地盒
                </label>
                <label class="checkbox-item">
                    <input type="radio" name="包装盒类型" value="飞机盒"> 飞机盒
                </label>
                <label class="checkbox-item">
                    <input type="radio" name="包装盒类型" value="其他"> 其他
                    <input type="text" name="其他盒型" class="hidden" style="width:150px; margin-left:10px;">
                </label>
            </div>
            
            <label>盒体材质</label>
            <select name="盒体材质" onchange="updateCostEstimate()">
                <option value="">-- 请选择 --</option>
                <option value="白卡纸（250-350g）">白卡纸（250-350g）</option>
                <option value="牛皮纸（双层）">牛皮纸（双层）</option>
                <option value="铜版纸（覆膜）">铜版纸（覆膜）</option>
                <option value="瓦楞纸（B楞/E楞）">瓦楞纸（B楞/E楞）</option>
                <option value="特种纸（需定制）">特种纸（需定制）</option>
            </select>
            
            <label>是否需要热缩膜？</label>
            <div class="checkbox-group">
                <label class="checkbox-item">
                    <input type="radio" name="热缩膜" value="需要" onchange="updateCostEstimate()"> 需要
                </label>
                <label class="checkbox-item">
                    <input type="radio" name="热缩膜" value="不需要" checked onchange="updateCostEstimate()"> 不需要
                </label>
            </div>
        </div>

        <!-- 内包装配置 -->
        <div class="form-section">
            <h2>3. 内包装配置</h2>
            
            <label>是否需要PE袋？</label>
            <div class="checkbox-group">
                <label class="checkbox-item">
                    <input type="radio" name="PE袋" value="需要" onchange="updateCostEstimate()"> 需要
                    <span style="margin-left:10px;">厚度：
                        <select name="PE袋厚度" style="width:90px; display:inline-block;" onchange="updateCostEstimate()">
                            <option value="0.03mm">0.03mm</option>
                            <option value="0.05mm" selected>0.05mm</option>
                            <option value="0.08mm">0.08mm</option>
                        </select>
                    </span>
                </label>
                <label class="checkbox-item">
                    <input type="radio" name="PE袋" value="不需要" checked onchange="updateCostEstimate()"> 不需要
                </label>
            </div>
            
            <label>缓冲材料</label>
            <div class="checkbox-group">
                <label class="checkbox-item">
                    <input type="checkbox" name="缓冲材料[]" value="珍珠棉" onchange="updateCostEstimate()"> 珍珠棉
                    <select name="珍珠棉密度" style="width:90px; margin-left:5px;" onchange="updateCostEstimate()">
                        <option value="25kg/m³">25kg/m³</option>
                        <option value="30kg/m³" selected>30kg/m³</option>
                        <option value="35kg/m³">35kg/m³</option>
                    </select>
                </label>
                <label class="checkbox-item">
                    <input type="checkbox" name="缓冲材料[]" value="EPE泡沫" onchange="updateCostEstimate()"> EPE泡沫
                </label>
                <label class="checkbox-item">
                    <input type="checkbox" name="缓冲材料[]" value="纸托" onchange="updateCostEstimate()"> 纸托
                </label>
            </div>
            
            <label>是否需要产品收纳袋？</label>
            <div class="checkbox-group">
                <label class="checkbox-item">
                    <input type="radio" name="产品收纳袋" value="需要" onchange="updateCostEstimate()"> 需要（
                    <select name="收纳袋材质" style="width:110px; display:inline-block;" onchange="updateCostEstimate()">
                        <option value="OPP袋">OPP袋</option>
                        <option value="无纺布">无纺布</option>
                        <option value="绒布">绒布</option>
                    </select>）
                </label>
                <label class="checkbox-item">
                    <input type="radio" name="产品收纳袋" value="不需要" checked onchange="updateCostEstimate()"> 不需要
                </label>
            </div>
        </div>

        <!-- 配件包装 -->
        <div class="form-section">
            <h2>4. 配件包装</h2>
            
            <label>配件清单（名称×数量）</label>
            <textarea name="配件清单" rows="3" placeholder="例：充电线×1、说明书×1、保修卡×1"></textarea>
            
            <label>配件独立包装方式</label>
            <div class="checkbox-group">
                <label class="checkbox-item">
                    <input type="checkbox" name="包装方式[]" value="PE袋" onchange="updateCostEstimate()"> PE袋
                </label>
                <label class="checkbox-item">
                    <input type="checkbox" name="包装方式[]" value="纸卡盒" onchange="updateCostEstimate()"> 纸卡盒
                </label>
                <label class="checkbox-item">
                    <input type="checkbox" name="包装方式[]" value="吸塑壳" onchange="updateCostEstimate()"> 吸塑壳
                </label>
            </div>
        </div>

        <!-- 成本参考 -->
        <div class="form-section">
            <h2>5. 包装成本参考</h2>
            
            <div class="cost-estimate">
                <div>预估单件包装成本：</div>
                <div class="cost-value" id="unit_cost">¥0.00</div>
                <div>总成本估算（按生产数量）：<span id="total_cost" style="font-weight:bold;">¥0.00</span></div>
            </div>
            
            <input type="hidden" id="calculated_cost" name="预估单件成本">
            <input type="hidden" id="total_calculated_cost" name="预估总成本">
            
            <label>您的目标成本（单件）</label>
            <input type="number" name="目标成本" placeholder="输入您的目标价格（元）" step="0.1" min="0">
        </div>

        <!-- 其他要求 -->
        <div class="form-section">
            <h2>6. 其他要求</h2>
            <textarea name="其他要求" rows="4" placeholder="特殊印刷工艺/环保认证/开模需求等"></textarea>
        </div>

        <button type="submit" class="submit-btn">提交包装需求</button>
    </form>

    <script>
        // 显示/隐藏其他盒型输入框
        document.querySelector('input[name="包装盒类型"][value="其他"]').addEventListener('change', function() {
            document.querySelector('input[name="其他盒型"]').classList.toggle('hidden', !this.checked);
        });

        // 成本估算逻辑
        function updateCostEstimate() {
            // 基础成本参数（单位：元）
            const COST_BASE = {
                "天地盒": 1.5,
                "飞机盒": 0.8,
                "其他": 2.0,
                materials: {
                    "白卡纸（250-350g）": 0.6,
                    "牛皮纸（双层）": 0.5,
                    "铜版纸（覆膜）": 0.8,
                    "瓦楞纸（B楞/E楞）": 0.4,
                    "特种纸（需定制）": 1.5
                },
                "热缩膜": 0.3,
                "PE袋": {
                    "0.03mm": 0.1,
                    "0.05mm": 0.15,
                    "0.08mm": 0.2
                },
                "缓冲材料": {
                    "珍珠棉": {
                        "25kg/m³": 0.4,
                        "30kg/m³": 0.5,
                        "35kg/m³": 0.6
                    },
                    "EPE泡沫": 0.3,
                    "纸托": 0.2
                },
                "产品收纳袋": {
                    "OPP袋": 0.3,
                    "无纺布": 0.8,
                    "绒布": 1.5
                },
                "配件包装": {
                    "PE袋": 0.1,
                    "纸卡盒": 0.5,
                    "吸塑壳": 0.7
                }
            };

            // 获取表单值（空值默认为0）
            const boxType = document.querySelector('input[name="包装盒类型"]:checked')?.value || "";
            const material = document.querySelector('select[name="盒体材质"]').value || "";
            const quantity = parseInt(document.getElementById('quantity').value) || 0;
            
            // 计算基础成本
            let cost = COST_BASE[boxType] || 0;
            if (material && COST_BASE.materials[material]) {
                cost += COST_BASE.materials[material];
            }

            // 添加外包装成本
            if (document.querySelector('input[name="热缩膜"]:checked')?.value === '需要') {
                cost += COST_BASE["热缩膜"];
            }

            // 添加内包装成本
            if (document.querySelector('input[name="PE袋"]:checked')?.value === '需要') {
                const thickness = document.querySelector('select[name="PE袋厚度"]').value;
                cost += COST_BASE["PE袋"][thickness] || 0;
            }

            // 缓冲材料
            if (document.querySelector('input[name="缓冲材料[]"][value="珍珠棉"]')?.checked) {
                const density = document.querySelector('select[name="珍珠棉密度"]').value;
                cost += COST_BASE["缓冲材料"]["珍珠棉"][density] || 0;
            }
            if (document.querySelector('input[name="缓冲材料[]"][value="EPE泡沫"]')?.checked) cost += COST_BASE["缓冲材料"]["EPE泡沫"] || 0;
            if (document.querySelector('input[name="缓冲材料[]"][value="纸托"]')?.checked) cost += COST_BASE["缓冲材料"]["纸托"] || 0;

            // 收纳袋
            if (document.querySelector('input[name="产品收纳袋"]:checked')?.value === '需要') {
                const bagMaterial = document.querySelector('select[name="收纳袋材质"]').value;
                cost += COST_BASE["产品收纳袋"][bagMaterial] || 0;
            }

            // 配件包装
            if (document.querySelector('input[name="包装方式[]"][value="PE袋"]')?.checked) cost += COST_BASE["配件包装"]["PE袋"] || 0;
            if (document.querySelector('input[name="包装方式[]"][value="纸卡盒"]')?.checked) cost += COST_BASE["配件包装"]["纸卡盒"] || 0;
            if (document.querySelector('input[name="包装方式[]"][value="吸塑壳"]')?.checked) cost += COST_BASE["配件包装"]["吸塑壳"] || 0;

            // 显示结果
            document.getElementById('unit_cost').textContent = `¥${cost.toFixed(2)}`;
            document.getElementById('total_cost').textContent = `¥${(cost * (quantity || 0)).toFixed(2)}`;
            
            // 设置隐藏字段值
            document.getElementById('calculated_cost').value = cost.toFixed(2);
            document.getElementById('total_calculated_cost').value = (cost * (quantity || 0)).toFixed(2);
        }

        // 初始化所有事件监听
        document.querySelectorAll('input, select').forEach(el => {
            el.addEventListener('change', updateCostEstimate);
        });
        document.getElementById('quantity').addEventListener('input', updateCostEstimate);

        // 表单提交
        document.getElementById('packagingForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const form = e.target;
            const formData = new FormData(form);
            
            fetch(form.action, {
                method: 'POST',
                body: formData,
                headers: {
                    'Accept': 'application/json'
                }
            })
            .then(response => {
                if (response.ok) {
                    document.getElementById('success-message').style.display = 'block';
                    form.reset();
                    window.scrollTo(0, 0);
                } else {
                    throw new Error('提交失败');
                }
            })
            .catch(error => {
                alert('提交出错，请稍后重试或直接联系：yuanqq2@gmail.com');
                console.error(error);
            });
        });

        // 初始计算
        updateCostEstimate();
    </script>
</body>
</html>